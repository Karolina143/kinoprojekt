@model List<kinoprojekt.Models.Film>
@{ Layout = null; }

<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Kino Pixel - Repertuar</title>
    <style>
        body { background: #0a0f1e; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; }
        
        header { 
            background: #1e293b; padding: 15px 50px; display: flex; 
            justify-content: space-between; align-items: center; 
            border-bottom: 3px solid #3b82f6; position: sticky; top: 0; z-index: 1000; 
        }
        header h1 { margin: 0; font-size: 24px; color: #3b82f6; letter-spacing: 2px; }
        
        .nav-links { display: flex; align-items: center; }
        .nav-links a, .dropbtn { 
            color: #94a3b8; text-decoration: none; margin-left: 30px; 
            font-weight: bold; text-transform: uppercase; font-size: 13px; 
            transition: 0.3s; cursor: pointer; background: none; border: none; padding: 0;
        }
        .nav-links a:hover, .dropdown:hover .dropbtn { color: #3b82f6; }

        .dropdown { position: relative; display: inline-block; }
        .dropdown-content { 
            display: none; position: absolute; background-color: #1e293b; 
            min-width: 180px; box-shadow: 0px 8px 16px rgba(0,0,0,0.5); 
            z-index: 1001; border-radius: 8px; border: 1px solid #3b82f6; top: 100%; left: 30px;
        }
        .dropdown-content a { color: #94a3b8; padding: 12px 16px; text-decoration: none; display: block; margin: 0; }
        .dropdown-content a:hover { color: white; background: #3b82f6; }
        .dropdown:hover .dropdown-content { display: block; }

        .search-container { padding: 30px; text-align: center; background: #0f172a; }
        #searchInput { padding: 12px 25px; width: 400px; border-radius: 30px; border: 2px solid #3b82f6; background: #1e293b; color: white; outline: none; font-size: 16px; }

        .grid { 
            display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            gap: 25px; 
            padding: 40px 10%; 
            max-width: 1600px;
            margin: 0 auto;
        }

        .movie-card { background: #1e293b; padding: 12px; border-radius: 15px; text-align: center; transition: 0.4s; }
        .movie-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.4); }
        
        .movie-card img { 
            width: 100%; 
            aspect-ratio: 2 / 3; 
            object-fit: cover; 
            border-radius: 10px; 
            margin-bottom: 12px; 
        }

        .movie-card h3 { 
            font-size: 16px; margin: 5px 0; 
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis; 
        }
        .movie-info { color: #94a3b8; font-size: 12px; margin-bottom: 15px; }
        
        .btn-details { display: inline-block; background: #3b82f6; color: white; padding: 8px 15px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 12px; }
    </style>
</head>
<body>
    <header>
        <h1>KINO PIXEL</h1>
        <nav class="nav-links">
            <a href="/">REPERTUAR</a>
            
            <div class="dropdown">
                <span class="dropbtn">GATUNKI ▾</span>
                <div class="dropdown-content">
                    <a href="#" onclick="filterCategory('Wszystkie')">Wszystkie</a>
                    <a href="#" onclick="filterCategory('Akcja')">Akcja</a>
                    <a href="#" onclick="filterCategory('Animacja')">Animacja</a>
                    <a href="#" onclick="filterCategory('Biograficzny')">Biograficzny</a>
                    <a href="#" onclick="filterCategory('Dramat')">Dramat</a>
                    <a href="#" onclick="filterCategory('Fantasy')">Fantasy</a>
                    <a href="#" onclick="filterCategory('Horror')">Horror</a>
                    <a href="#" onclick="filterCategory('Przygodowy')">Przygodowy</a>
                    <a href="#" onclick="filterCategory('Sci-Fi')">Sci-Fi</a>
                </div>
            </div>

            <a href="/Home/Wkrotce">WKRÓTCE</a>
<a id="btnLogowanieHome" href="/Home/Zaloguj">LOGOWANIE</a>
<a id="btnKontoHome" href="/Home/MojeKonto" style="display: none; color: #3b82f6;">MOJE KONTO</a>
        </nav>
    </header>

    <div class="search-container">
        <input type="text" id="searchInput" onkeyup="filterEverything()" placeholder="Szukaj filmu...">
    </div>

    <div class="grid" id="movieGrid">
        @foreach (var film in Model)
        {
            <div class="movie-card" data-category="@film.Kategoria">
                <img src="@film.Obrazek" alt="@film.Tytul">
                <h3 class="movie-title">@film.Tytul</h3>
                <div class="movie-info">@film.Kategoria | @film.CzasTrwania</div>
                <a href="/Home/Szczegoly/@film.Id" class="btn-details">Szczegóły</a>
            </div>
        }
    </div>

    <script>
        let selectedCategory = 'Wszystkie';

        function filterCategory(cat) {
            selectedCategory = cat;
            filterEverything();
        }

        function filterEverything() {
            let searchText = document.getElementById('searchInput').value.toLowerCase();
            let cards = document.getElementsByClassName('movie-card');

            for (let card of cards) {
                let title = card.querySelector('.movie-title').innerText.toLowerCase();
                let category = card.getAttribute('data-category');

                let matchText = title.includes(searchText);
                let matchCat = (selectedCategory === 'Wszystkie' || category === selectedCategory);

                if (matchText && matchCat) {
                    card.style.display = "";
                } else {
                    card.style.display = "none";
                }
            }
        }
    </script>
    <script>
    // Ten skrypt odpali się tylko na stronie głównej i "naprawi" menu
    (function() {
        if (localStorage.getItem('zalogowanyPixel')) {
            const loginBtn = document.getElementById('btnLogowanieHome');
            const accountBtn = document.getElementById('btnKontoHome');

            if (loginBtn) loginBtn.style.display = 'none';
            if (accountBtn) accountBtn.style.display = 'inline-block';
        }
    })();
</script>
</body>
</html>